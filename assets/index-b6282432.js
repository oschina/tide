import{a as s,j as h,F as ie}from"./jsx-runtime-c78ff179.js";import{r as d}from"./index-0dd5bd88.js";import{r as oe,R as le}from"./index-720ea98b.js";import{ad as ce,d as b,ae as k,af as Q,P,ag as j,ah as ue,p as de,q as pe,r as ge,s as me,t as he,u as fe,v as ye,w as Ae,x as _e,y as be,z as xe,A as we,G as Me,J as Ee,K as ke,N as Le,Q as ve,R as Ie,U as Re,V as Te,W as Be,X as Ne,Y as Ce,Z as $e,_ as He,$ as Qe,a0 as Pe,a1 as je,a2 as Se,a3 as De,a4 as qe,a5 as Ue,a6 as ze,a7 as Fe,a8 as Ke,M as Ve,f as L,H as Oe,B as Je,I as We,e as Ge,C as Ze,g as Ye,O as Xe,h as et,L as tt,i as nt,j as st,k as at,l as rt,m as it,n as ot,o as lt,a9 as ct,aa as ut,ab as dt,ac as pt}from"./TextBubbleMenu-7546d244.js";import{M as S,b as D,a as q,H as gt,u as mt,E as ht,c as ft,U as yt,R as At}from"./MentionList-61a78eed.js";var _t=function(e){return function(n,t){var a=d.exports.useRef(!1);e(function(){return function(){a.current=!1}},[]),e(function(){if(!a.current)a.current=!0;else return n()},t)}},bt=function(e){return typeof e=="function"},xt=!1;const wt=xt;function B(e){wt&&(bt(e)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof e)));var n=d.exports.useRef(e);n.current=d.exports.useMemo(function(){return e},[e]);var t=d.exports.useRef();return t.current||(t.current=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];return n.current.apply(this,a)}),t.current}const Mt=_t(d.exports.useEffect);var M=(e=>(e.MEMBER="users",e.ISSUE="issues",e.PULL_REQUEST="pull_requests",e))(M||{});const Et={[M.MEMBER]:"username",[M.ISSUE]:"ident",[M.PULL_REQUEST]:"id"},kt=(e,n)=>{let t=[];const a=ce(()=>{e(t),t=[]},n);return i=>{t=[...t,i],a()}},Lt=({request:e,wait:n=500})=>{const t=d.exports.useRef(null),a=B(async o=>{var c;const g=o.reduce((u,p)=>(u[p.type]||(u[p.type]=[]),u[p.type].push(p.value),u),{});let l;try{l=await e(g)}catch(u){console.error(u)}const m=(c=Object.keys(l))==null?void 0:c.reduce((u,p)=>{var A;return u[p]=(A=l[p])==null?void 0:A.reduce((x,f)=>{const w=f==null?void 0:f[Et[p]];return w&&(x[w]=f),x},{}),u},{});o.forEach(u=>{var p,A;t.current||(t.current={}),t.current[u.type]||(t.current[u.type]={}),t.current[u.type][u.value]=((p=m==null?void 0:m[u.type])==null?void 0:p[u.value])||null,u.resolve(((A=m==null?void 0:m[u.type])==null?void 0:A[u.value])||null)})}),i=B(kt(a,n));return{fetch:B(async(o,g)=>{var l,m;return(m=(l=t.current)==null?void 0:l[o])!=null&&m[g]?t.current[o][g]:new Promise(c=>{i({type:o,value:g,resolve:c})})})}},Z=d.exports.createContext({fetchData:async()=>null}),vt=()=>d.exports.useContext(Z),It=({fetchResources:e,children:n})=>{const{fetch:t}=Lt({request:e,wait:500}),a={fetchData:(i,r)=>t(i,r)};return s(Z.Provider,{value:a,children:n})},U=(e,n)=>{const{fetchData:t}=vt(),[a,i]=d.exports.useState(!0),[r,o]=d.exports.useState(null),g=async()=>{i(!0);const l=n?await t(e,n):null;o(l),i(!1)};return d.exports.useEffect(()=>{g()},[e,n]),{loading:a,data:r,refresh:t}};const Rt=({className:e})=>h("svg",{className:b("gwe-loading",e),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",opacity:".25"}),s("path",{opacity:".75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),z=Rt,G="/wysiwyg-editor/assets/type-1-f89813ea.svg",Tt="/wysiwyg-editor/assets/type-2-87ddadc6.svg",Bt="/wysiwyg-editor/assets/type-3-52cf6cf5.svg";const Nt={en:{bug:"Bug",feature:"Feature",task:"Task"},zh_CN:{bug:"缺陷",feature:"需求",task:"任务"}},Ct=({className:e,category:n,local:t="zh_CN"})=>{const a=Nt[t],r={feature:{title:a.feature,src:G},requirement:{title:a.feature,src:G},task:{title:a.task,src:Tt},bug:{title:a.bug,src:Bt}}[n||"feature"];return s("span",{className:b("gwe-issue-type-icon",e),children:s("img",{src:r.src,alt:r.title,title:r.title})})},Y=Ct;const $t=({editor:e,node:n,extension:t})=>{var c;const{class:a,...i}=k({"data-type":t.name},t.options.HTMLAttributes),{loading:r,data:o}=U(M.ISSUE,n.attrs.ident),g=(o==null?void 0:o.title)||n.attrs.title,l=(c=o==null?void 0:o.issue_type)==null?void 0:c.category,m=t.options.getLink(n.attrs.url);return s(Q,{as:"span",className:a,"data-drag-handle":!0,...i,children:h("a",{className:"gwe-mention-issue",href:m,target:e.isEditable?"_blank":void 0,rel:"noreferrer",title:n.attrs.title,children:[r?s(z,{className:"gwe-mention-issue__icon"}):s(Y,{className:"gwe-mention-issue__icon",category:l}),s("span",{className:"gwe-mention-issue__title",children:g})]})})};const Ht=({item:e})=>{var t;if(!e.attrs)return null;const n=(t=e.attrs.issue_type)==null?void 0:t.category;return h("div",{className:"gwe-mention-issue__pop-item",children:[s("span",{className:"gwe-mention-issue__pop-item-icon",children:s(Y,{category:n})}),h("span",{className:"gwe-mention-issue__pop-item-id",children:["#",e.attrs.ident]}),s("span",{className:"gwe-mention-issue__pop-item-title",children:e.attrs.title})]})};const Qt=({text:e="没有数据"})=>s("div",{className:"gwe-mention-no-result",children:e}),F=Qt,Pt=new P("mentionIssueSuggestion"),jt=S.extend({name:"mentionIssue",addOptions(){var n;const e=(n=this.parent)==null?void 0:n.call(this);return{...e,renderLabel({options:t,node:a}){return`${t.suggestion.char}${a.attrs.ident}`},suggestion:D({...e==null?void 0:e.suggestion,pluginKey:Pt,char:"#",component:q,componentProps:{itemRender:t=>s(Ht,{item:t}),emptyRender:()=>s(F,{})},tippyOptions:{maxWidth:400}}),getLink:t=>t,nodeView:j($t)}},addAttributes(){return{ident:{default:null,parseHTML:e=>`${e.getAttribute("data-ident")??""}`,renderHTML:e=>({"data-ident":e.ident||""})},title:{default:null,parseHTML:e=>`${e.getAttribute("data-title")??""}`,renderHTML:e=>({"data-title":e.title||""})},url:{default:null,parseHTML:e=>`${e.getAttribute("data-url")??""}`,renderHTML:e=>({"data-url":e.url})}}},parseHTML(){return[{tag:`a[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:n}){return["a",k({"data-type":this.name,href:e.attrs.url,target:"_blank"},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]},addNodeView(){return this.options.nodeView}}),St=e=>{const n=["#1abc9c","#2ecc71","#3498db","#9b59b6","#34495e","#16a085","#27ae60","#2980b9","#8e44ad","#2c3e50","#f1c40f","#e67e22","#e74c3c","#eca0f1","#95a5a6","#f39c12","#d35400","#c0392b","#bdc3c7","#7f8c8d"],t=String(e).toUpperCase().split(" ");let a;t.length===1?a=t[0]?t[0].charAt(0):"?":a=t[0].charAt(0)+t[1].charAt(0);const r=((a==="?"?72:a.charCodeAt(0))-64)%20;return n[r-1]||"#000000"},Dt=St;const qt=({className:e,src:n,username:t})=>{const a="no_portrait.png";if(n&&typeof n=="string"&&n.startsWith("http")&&!n.endsWith(a))return s("span",{className:b("gwe-member-avatar",e),children:s("img",{className:"gwe-member-avatar__img",src:n,alt:""})});const i=t.charAt(0).toUpperCase(),r=Dt(t);return s("span",{className:b("gwe-member-avatar",e),style:{backgroundColor:r},children:s("span",{className:"gwe-member-avatar__text",children:i})})},X=qt;const Ut=({node:e,extension:n})=>{const{class:t,...a}=k({"data-type":n.name},n.options.HTMLAttributes),{loading:i,data:r}=U(M.MEMBER,e.attrs.username),o=(r==null?void 0:r.name)||(r==null?void 0:r.username)||e.attrs.name||e.attrs.username,g=r==null?void 0:r.avatar_url,l=n.options.getLink(e.attrs.url);return s(Q,{as:"span",className:t,"data-drag-handle":!0,...a,children:h("a",{className:"gwe-mention-member__item",href:l,target:"_blank",rel:"noreferrer",children:[s("span",{className:"gwe-mention-member__avatar",children:i?s(z,{}):s(X,{src:g,username:o})}),s("span",{className:"gwe-mention-member__name",children:o})]})})};const zt=({item:e})=>e.attrs?h("div",{className:"gwe-mention-member__list-item",children:[s("span",{className:"gwe-mention-member__list-avatar",children:s(X,{src:e.attrs.avatar_url,username:e.attrs.name})}),s("span",{className:"gwe-mention-member__list-item-name",children:e.attrs.name})]}):null,Ft=new P("mentionMemberSuggestion"),Kt=S.extend({name:"mentionMember",addOptions(){var n;const e=(n=this.parent)==null?void 0:n.call(this);return{...e,renderLabel({options:t,node:a}){return`${t.suggestion.char}${a.attrs.name??a.attrs.id}`},suggestion:D({...e==null?void 0:e.suggestion,pluginKey:Ft,char:"@",component:q,componentProps:{itemRender:t=>s(zt,{item:t}),emptyRender:()=>s(F,{})}}),getLink:t=>t,nodeView:j(Ut)}},addAttributes(){return{name:{default:null,parseHTML:e=>e.getAttribute("data-name")||"",renderHTML:e=>({"data-name":e.name||""})},username:{default:null,parseHTML:e=>e.getAttribute("data-username")||"",renderHTML:e=>({"data-username":e.username||""})},url:{default:null,parseHTML:e=>e.getAttribute("data-url")||"",renderHTML:e=>({"data-url":e.url})}}},parseHTML(){return[{tag:`a[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:n}){return["a",k({"data-type":this.name,href:e.attrs.url,target:"_blank"},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]},addNodeView(){return this.options.nodeView}});function ee({state:e,className:n,...t}){return s(ue,{className:b({opened:"gwe-pr-state-blue",closed:"gwe-pr-state-muted",merged:"gwe-pr-state-green"}[e],n),...t})}const Vt=({editor:e,node:n,extension:t})=>{const{class:a,...i}=k({"data-type":t.name},t.options.HTMLAttributes),{loading:r,data:o}=U(M.PULL_REQUEST,n.attrs.id),g=(o==null?void 0:o.title)||n.attrs.title,l=t.options.getLink(n.attrs.url);return s(Q,{as:"span",className:a,"data-drag-handle":!0,...i,children:h("a",{className:"gwe-mention-pull-request",href:l,target:e.isEditable?"_blank":void 0,rel:"noreferrer",title:n.attrs.title,children:[s("span",{className:"gwe-mention-pull-request__icon",children:r?s(z,{}):s(ee,{state:o==null?void 0:o.state})}),s("span",{className:"gwe-mention-pull-request__title",children:g})]})})};const Ot=({item:e})=>{if(!e.attrs)return null;const n=e.attrs.state;return h("div",{className:"gwe-mention-pull-request__pop-item",children:[s(ee,{className:"gwe-mention-pull-request__pop-item-icon",state:n}),h("span",{className:"gwe-mention-pull-request__pop-item-id",children:["!",e.attrs.iid]}),s("span",{className:"gwe-mention-pull-request__pop-item-title",children:e.attrs.title})]})},Jt=Ot,Wt=new P("mentionPullRequestSuggestion"),Gt=S.extend({name:"mentionPullRequest",addOptions(){var n;const e=(n=this.parent)==null?void 0:n.call(this);return{...e,renderLabel({options:t,node:a}){return`${t.suggestion.char}${a.attrs.iid??a.attrs.id}`},suggestion:D({...e==null?void 0:e.suggestion,pluginKey:Wt,char:"!",component:q,componentProps:{itemRender:t=>s(Jt,{item:t}),emptyRender:()=>s(F,{})},tippyOptions:{maxWidth:400}}),getLink:t=>t,nodeView:j(Vt)}},addAttributes(){return{id:{default:null,parseHTML:e=>`${e.getAttribute("data-id")??""}`,renderHTML:e=>({"data-id":e.id||""})},iid:{default:null,parseHTML:e=>`${e.getAttribute("data-iid")??""}`,renderHTML:e=>({"data-iid":e.iid||""})},title:{default:null,parseHTML:e=>`${e.getAttribute("data-title")??""}`,renderHTML:e=>({"data-title":e.title||""})},url:{default:null,parseHTML:e=>`${e.getAttribute("data-url")??""}`,renderHTML:e=>({"data-url":e.url})}}},parseHTML(){return[{tag:`a[data-type="${this.name}"]`}]},renderHTML({node:e,HTMLAttributes:n}){return["a",k({"data-type":this.name,href:e.attrs.url,target:"_blank"},this.options.HTMLAttributes,n),this.options.renderLabel({options:this.options,node:e})]},addNodeView(){return this.options.nodeView}}),N=e=>Promise.resolve([]),Zt=async(e,n)=>"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAAAAACIM/FCAAACh0lEQVR4Ae3ch5W0OgyG4dt/mQJ2xgQPzJoM1m3AbALrxzrf28FzsoP0HykJEEAAAUQTBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEkKK0789+GK/I2ezfQB522PnS1qc8pGgXvr4tE4aY0XOUWlGImThWgyCk6DleixzE7qwBkg/MGiDPlVVAyp1VQGrPKiACDhFI6VkF5LmzCki+sg7IwDoglnVAil0IMkeG9CyUiwsxLFUVFzJJOQaKCjFCDN9RXMjIX7W6ztZXZDKKCyn8sWJvH+nca7WHDN9lROlAliPH9iRKCPI4cswFJQWxB46toLQgQ9jhn5QYZA9DOkoMUoQde5YapAxDWkoNYsOQR3KQd9CxUnIQF4S49CB9ENKlBxmDEKsFUgMCCCCAAHIrSF61f6153Ajy8nyiPr8L5MXnmm4CyT2fzN4DUvHZ+ntA2tOQBRBAAAEEEEAAAQQQ7ZBaC6TwSiDUaYHQ2yuB0MN+ft+43whyrs4rgVCjBUKTFshLC6TUAjGA3AxSaYFYLZBOC2RUAsk8h5qTg9QcbEoOsoQhQ2qQhsO5xCD5dgB5JQaZ+KBKGtKecvR81Ic0ZDjByKdDx0rSEDZ/djQbH+bkIdvfJFm98BfV8hD2zprfVdlu9PxVeyYAkciREohRAplJCaRSAplJCcQogTjSAdlyHRBvSAekJR0QRzogA+mADJkOiCPSAPEtqYBshlRAXC43hxix2QiOuEZkVERykGyNo9idIZKE0HO7XrG6OiMShlDWjstVzdPgXtUH9v0CEidAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQAABBBBAAAEEEEAAAQQQQP4HgjZxTpdEii0AAAAASUVORK5CYII=",K=()=>{const e=window.location.hostname;return/gitee\.com/.test(e)?"https://e.gitee.com":/.+\.runjs\.cn/.test(e)?`https://${e.split(".")[0]}-ent.runjs.cn`:"https://e.gitee.com"},te={linkReg:{ent:/\/members\/trend\//},getLink:e=>te.linkReg.ent.test(e)?K()+e:e},$={linkReg:{ent:/\?issue=I/i,community:/\/issues\/I/},getLink:e=>$.linkReg.community.test(e)?e:$.linkReg.ent.test(e)?K()+e:e},ne={linkReg:{ent:/\/repos\/.+\/pulls\//},getLink:e=>ne.linkReg.ent.test(e)?K()+e:e},Yt=({mention:e,imageUpload:n=Zt})=>{const{fetchMentionMember:t=N,fetchMentionIssue:a=N,fetchMentionPR:i=N}=e||{};return[de,pe,ge,me,he,fe,ye.extend({addKeyboardShortcuts:()=>({})}).configure({types:["heading","paragraph"]}),Ae,_e,be,xe,we,Me,Ee,ke,Le,ve,Ie,Re,Te,Be,Ne,Ce.configure({onReadOnlyChecked:()=>!0}),$e,He,Qe,Pe,je,Kt.configure({suggestion:{items:({query:r})=>t(r)},getLink:te.getLink}),jt.configure({suggestion:{items:({query:r})=>a(r)},getLink:$.getLink}),Gt.configure({suggestion:{items:({query:r})=>i(r)},getLink:ne.getLink}),Se.configure({enableEmoticons:!0,forceFallbackImages:!1,suggestion:De}),gt,qe,Ue,ze.configure({image:{uploader:n}}),Fe.configure({linkify:!0,breaks:!0,tightLists:!0,paste:!0,copy:!1})]},se=d.exports.forwardRef(({className:e,style:n,defaultValue:t=void 0,autoFocus:a=!1,readOnly:i,readOnlyEmptyView:r,children:o,onChange:g,onFocus:l,onBlur:m,onReady:c,mention:u,imageUpload:p,fetchResources:A=()=>Promise.resolve(void 0)},x)=>{const f=d.exports.useRef(l);f.current=l;const w=d.exports.useRef(m);w.current=m;const v=d.exports.useRef(c);v.current=c;const I=d.exports.useRef(g);I.current=g;const _=mt(ht,{content:t,extensions:Yt({mention:u,imageUpload:p}),autofocus:a,editable:!i,editorProps:{attributes:{spellCheck:"false"}},onCreate:({editor:y})=>{var O;const{state:E,view:re}=y;if(E.plugins.length>0){const J=[],W=[];E.plugins.forEach(T=>{T.key.includes("Suggestion")?W.push(T):J.push(T)}),re.updateState(E.reconfigure({plugins:[...W,...J]}))}(O=v.current)==null||O.call(v,y)},onUpdate:({editor:y})=>{var E;(E=I.current)==null||E.call(I,y)},onFocus:()=>{var y;(y=f.current)==null||y.call(f)},onBlur:()=>{var y;(y=w.current)==null||y.call(w)}},[]);d.exports.useEffect(()=>{!_||_.isEditable===!i||_.setEditable(!i)},[i]),d.exports.useImperativeHandle(x,()=>_,[_]);const V=b("gwe-content",e);return _&&_.isEmpty&&!_.isEditable?s("div",{className:V,children:r||null}):s(It,{fetchResources:A,children:s(ft,{className:V,style:n,editor:_,children:o})})});se.displayName="Editor";const Xt=({children:e})=>oe.exports.createPortal(e,document.body),ae=d.exports.forwardRef(({className:e,style:n,menuClassName:t,menuStyle:a,menuEnableUndoRedo:i=!0,readOnlyShowMenu:r=!1,contentClassName:o,contentStyle:g,...l},m)=>{const[c,u]=d.exports.useState(null),[p,A]=d.exports.useState(!1);d.exports.useImperativeHandle(m,()=>c,[c]),Mt(()=>{var f;(f=l.onFullscreenChange)==null||f.call(l,p)},[p]);const x=s("div",{className:b("gwe-editor",{"gwe-editor--fullscreen":p},e),style:n,children:h(Ke,{editor:c,children:[c&&!(l!=null&&l.readOnly&&!r)&&h(Ve,{className:b(t,{disabled:r}),style:a,children:[i&&h(ie,{children:[s(yt,{}),s(At,{}),s(L,{})]}),s(Oe,{}),s(Je,{}),s(We,{}),s(Ge,{}),s(Ze,{}),s(L,{}),s(Ye,{}),s(Xe,{}),s(et,{}),s(L,{}),s(tt,{}),s(nt,{}),s(st,{}),s(at,{}),s(L,{}),s(rt,{}),s(it,{}),s(ot,{}),s(L,{}),s(lt,{fullscreen:p,onFullscreenChange:A})]}),h(se,{className:o,style:g,ref:u,...l,children:[c&&s(ct,{editor:c}),c&&s(ut,{editor:c}),c&&s(dt,{editor:c}),c&&s(pt,{editor:c})]})]})});return p?s(Xt,{children:x}):x});ae.displayName="LegacyEditor";function en(e){const{el:n,options:t={}}=e;le.render(s(ae,{...t}),n)}const tn=({el:e,options:n})=>{en({el:e,options:n})},nn=[{id:6,iid:5,ident:"I6",title:"我是 git 账号的额我是 git 账号的额我是 git 账号的额我是 git 账号的额我是 git 账号的额",issue_type:{id:1,enterprise_id:0,title:"任务",created_at:"2022-04-14T21:24:30+08:00",updated_at:"2022-04-14T21:24:30+08:00",serial:0,template:null,ident:null,is_system:!1,color:"#00BE2D",category:"task",description:"",builtin_fields:[],state:1}},{id:5,iid:4,ident:"I5",title:"我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的",issue_type:{id:1,enterprise_id:0,title:"任务",created_at:"2022-04-14T21:24:30+08:00",updated_at:"2022-04-14T21:24:30+08:00",serial:0,template:null,ident:null,is_system:!1,color:"#00BE2D",category:"task",description:"",builtin_fields:[],state:1}},{id:3,iid:2,ident:"I3",title:"31231231231",issue_type:{id:1,enterprise_id:0,title:"任务",created_at:"2022-04-14T21:24:30+08:00",updated_at:"2022-04-14T21:24:30+08:00",serial:0,template:null,ident:null,is_system:!1,color:"#00BE2D",category:"task",description:"",builtin_fields:[],state:1}},{id:2,iid:1,ident:"I2",title:"1231",issue_type:{id:1,enterprise_id:0,title:"任务",created_at:"2022-04-14T21:24:30+08:00",updated_at:"2022-04-14T21:24:30+08:00",serial:0,template:null,ident:null,is_system:!1,color:"#00BE2D",category:"task",description:"",builtin_fields:[],state:1}},{id:4,iid:3,ident:"I4",title:"我是 git 账号的 的",issue_type:{id:1,enterprise_id:0,title:"任务",created_at:"2022-04-14T21:24:30+08:00",updated_at:"2022-04-14T21:24:30+08:00",serial:0,template:null,ident:null,is_system:!1,color:"#00BE2D",category:"task",description:"",builtin_fields:[],state:1}}],sn=[{name:"我是 GIT",username:"git",avatar_url:"http://gitee.my/assets/no_portrait.png"},{name:"测试",username:"ceshi",avatar_url:"https://file.nancode.cn/1677149696919-189052581.png"},{name:"尼尔",username:"nanzm",avatar_url:"http://gitee.my/assets/no_portrait.png"}],an=[{id:69,iid:60,state:"opened",title:"123123123",lightweight:!1,project_id:1,project_path:"nanzm/java-web-demo"},{id:68,iid:59,state:"opened",title:"qeqweqwewqe",lightweight:!1,project_id:1,project_path:"nanzm/java-web-demo"},{id:67,iid:58,state:"closed",title:"create-pr test",lightweight:!1,project_id:1,project_path:"nanzm/java-web-demo"},{id:66,iid:57,state:"closed",title:"【轻量级 PR】：12312311231231123123231231123123112312323123112312311231232312311231231123123231231123123112312323123112312311231232312311231231123123112312311231231123123112312311231231",lightweight:!0,project_id:1,project_path:"nanzm/java-web-demo"},{id:65,iid:56,state:"opened",title:"【轻量级 PR】：sssss",lightweight:!0,project_id:1,project_path:"nanzm/java-web-demo"}],rn=e=>new Promise(n=>setTimeout(n,e));async function C(e){return await rn(500),e==="issues"?nn:e==="members"?sn:e==="pullRequests"?an:[]}const R=e=>new Promise(n=>setTimeout(n,e)),on={type:"doc",content:[{type:"heading",attrs:{textAlign:"left",indent:0,level:1},content:[{type:"emoji",attrs:{name:"brown_heart"}},{type:"emoji",attrs:{name:"blue_heart"}},{type:"emoji",attrs:{name:"yellow_heart"}},{type:"text",text:"12312123131331232131232123123"}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"123123123"}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionMember",attrs:{name:"ceshi",username:"ceshi",url:"/ceshi"}},{type:"text",text:" "}]},{type:"paragraph",attrs:{textAlign:"left",indent:0}},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionMember",attrs:{name:"ceshi",username:"ceshi",url:"/ceshi"}},{type:"text",text:" "},{type:"mentionMember",attrs:{name:"git",username:"git",url:"/git"}},{type:"text",text:" "},{type:"mentionMember",attrs:{name:"git",username:"git",url:"/git"}},{type:"text",text:" "},{type:"mentionMember",attrs:{name:"neil",username:"nanzm",url:"/nanzm"}},{type:"text",text:" "}]},{type:"taskList",content:[{type:"taskItem",attrs:{checked:!0},content:[{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"123123"}]}]},{type:"taskItem",attrs:{checked:!0},content:[{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"12313213131231231"}]}]},{type:"taskItem",attrs:{checked:!0},content:[{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"1231231231231"}]}]}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionMember",attrs:{name:"ceshi",username:"ceshi",url:"/ceshi"}},{type:"text",text:" "}]},{type:"paragraph",attrs:{textAlign:"left",indent:0}},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionMember",attrs:{name:"neil",username:"nanzm",url:"/nanzm"}},{type:"text",text:" "},{type:"mentionMember",attrs:{name:"git",username:"git",url:"/git"}},{type:"text",text:" "}]},{type:"paragraph",attrs:{textAlign:"left",indent:0}},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionPullRequest",attrs:{id:"59",iid:"59",title:"qeqweqwewqe",url:"/nanzm/java-web-demo/pulls/59"}},{type:"text",text:" "}]},{type:"paragraph",attrs:{textAlign:"left",indent:0}},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"mentionIssue",attrs:{ident:"I5",title:"我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的",url:"/nanzm/java-web-demo/issues/I5"}},{type:"text",text:" "}]},{type:"codeBlock",attrs:{language:"plaintext"}},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"1231231231"}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"12312"}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"31231231233"}]},{type:"paragraph",attrs:{textAlign:"left",indent:0},content:[{type:"text",text:"1231212331231231"}]},{type:"image",attrs:{src:"https://file.nancode.cn/1678423410064-184890170.jpeg",alt:"",title:"",width:72,height:72,align:"left"}}]},ln=[],cn=[{id:5,title:"我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的我是 neil 账号的",iid:4,ident:"I5",issue_type_id:1}],un=[{id:59,project_id:1,target_branch:"master",source_repo:1,source_branch:"dev222222222",author_id:1,assignee_id:0,title:"的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多的点点滴滴多多多多多多",created_at:"2022-08-26T17:04:00+08:00",updated_at:"2022-09-05T18:56:40+08:00",milestone_id:0,state:"opened",state_int:40,merge_status:"can_be_merged",iid:50,prune_branch:!1,merge_commit_sha:"d55a89a4a6e647775896f7476c08bb10ec4021d2",tester_id:0,updated_by_id:1,closed_at:"2022-08-28T22:02:41+08:00",noteable_count:0,check_state:1,test_state:1,close_related_issue:1,priority:0,lightweight:!1,pr_assign_num:1,pr_test_num:1,multiple:0,api_review_state:0,api_reviewer_id:null,pr_api_review_num:0,latest_scan_id:0,enterprise_id:0,draft:!1,bits:0,cache_bits:0}],dn={users:ln,issues:cn,pull_requests:un};let H;try{const e=localStorage.getItem("legacy-demo");e?H=JSON.parse(e):H=on}catch(e){console.log(e)}tn({el:document.getElementById("app"),options:{readOnly:!1,defaultValue:H,onReady:()=>{console.log("onReady")},onFocus:()=>{console.log("onFocus")},onBlur:()=>{console.log("onBlur")},onChange:e=>{localStorage.setItem("legacy-demo",JSON.stringify(e.getJSON()))},onFullscreenChange:e=>{console.log("----onFullscreenChange-----",e)},imageUpload:(e,n)=>Promise.resolve("https://file.nancode.cn/1678359851942-284541675.jpg"),fetchResources:async e=>(await R(1e3),Promise.resolve(dn)),mention:{fetchMentionIssue:async e=>(console.log("fetchMentionIssue",e),await R(1e3),(await C("issues")).map(a=>({id:a.id,attrs:{...a,url:`/${a.iid}`}}))),fetchMentionMember:async e=>(console.log("fetchMentionIssue",e),await R(1e3),(await C("members")).map(t=>({id:t.username,attrs:{...t,url:`/${t.username}`,avatar_url:"https://file.nancode.cn/1678359851942-284541675.jpg"}}))),fetchMentionPR:async e=>(console.log("fetchMentionIssue",e),await R(1e3),(await C("pullRequests")).map(t=>({id:t.id,attrs:{...t,url:`/${t.id}`}})))}}});
